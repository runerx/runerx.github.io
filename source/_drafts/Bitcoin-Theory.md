---
title: 比特币理论概要
categories: Bitcoin
tags: 
  - Bitcoin
---



## 点对点现金

一个纯粹的点对点电子现金系统的在线支付允许直接从一方发送到另一方，而无需通过金融机构。

与传统银行模式不同，在传统银行模式中，两方进行交易时，双方都必须使用受信任的第三方（例如银行）的服务，而在比特币中，货币是使用比特币协议进行点对点交换的。

由于协议的可扩展性，可以有无限数量的点对点交易，该扩展性仅受构建和验证每笔交易的经济性而非任意参数的限制。

钱包允许用户创建数字货币的所有权签名并将其分配给新的所有者的交易。这些交易的记录构成了比特币的交易历史，有时称为分布式账本。

交易记录在所有各方都可见的公共分布式账本上，无需金融机构的参与。这并不意味着银行不会使用比特币或成为比特币生态系统的一部分。事实上，使用比特币系统的银行将会在金融市场的竞争获得低成本交易验证的优势。



## 数字签名和可信第三方

数字签名提供了部分解决方案，但如果仍然需要可信第三方来防止双重支出，那么就会丧失优势。

数字签名是检验代币所有者身份的一种手段。数字签名的工作原理是生成消息的唯一hash并使用发送者的私钥对其进行签名。生成的哈希对于消息来说是唯一的，更改消息的任何部分都会完全改变哈希，从而使数字签名无效。

我们在手写或打印的消息上使用手写签名，将身份与消息联系起来。同样，数字签名是将个人与数字数据绑定的技术。这可以由接收者独立验证。比特币的核心创新之一是它允许验证数字签名，而无需添加知道交易过程的第三方。

当用户构建一笔交易时，用高度灵活的脚本语言定义可以使用coin的条件。使用椭圆曲线数字签名算法（ECDSA）（比特币中使用的签名类型）将签名纳入这些条件中，为用户提供了一种方法来证明他们控制私钥。该密钥链接到一个基于脚本的谜题，用户在收到硬币时提供该谜题。要使用它，用户必须提供正确的脚本，并包含必要的证明以正确解锁该脚本。由参与交易的节点来确定交易的内容、创建签名并将其提交到网络进行验证。

虽然记录交易的交易处理者对所交换的比特币的价值没有任何利益，但他们会因验证和记录交易的服务而获得交易费。因为他们不是交易的一方，所以他们成为一个简单的第三方，不需要给予任何信任。交易处理者不需要将所有交易记录到分类账上，但如果用户附加足够的费用让他们认为值得，并且只要交易实际上有效，就可以选择这样做。



## 点对点网络

我们提出了一种解决点对点网络双重支出问题的方案。

双重支出是指签署代币以创建交易并将该交易提交到网络，然后使用同一个代币创建不同的交易并支付给不同的接收者的行为，从而有效地将同一个代币花费两次。



比特币通过收集、验证所有发生的交易并为其添加时间戳的点对点网络解决双重支付问题，通过仅接受第一次出现的交易来解决双重支出问题。

比特币网络是一个全球基础设施，由企业构建，这些企业通过添加新交易来争夺扩展账本的权利。每笔交易只能处理一次，并且交易中使用的输入将被消耗。一旦交易被提交到网络，它就会在几秒钟内广播到所有节点，这使得在没有欺诈节点帮助的情况下几乎不可能执行双花。



## 时间链和工作量证明

比特币网络通过将交易哈希写入工作量证明网络来为交易添加时间戳。

时间链可以用来表达比特币带有时间戳的事件链的性质。当交易被接收到网络中时，节点捕获它们并将其整理到日志中。这些日志或“块”由带有时间戳的连续交易列表组成，代表了它们所包含的所有交易的存在性和有效性证明的共识协议。

工作量证明是解释决定谁可以更新比特币区块链交易的规则时使用的术语。简而言之，为了获得更新下一个交易块的权利，您需要提供证据证明您已经解决了一个困难但可以通过网络轻松验证的计算挑战。通过这样做，您可以证明您已经完成了解决该问题的工作。

当收到新交易时，节点将它们添加到块template中，该template包含它们已接受但尚未放入有效块中的所有交易，并在必须解决该难题才能形成有效块。如果提交成功证明提出该块的节点已执行该块有效所需的工作。

散列意味着获取任意长度的数据输入并对其进行转换，以产生可重复但本质上随机的固定长度的输出。在比特币中，交易通过称为 SHA-256 的哈希算法运行，该算法给出固定长度 256 位的输出。

通过这种方式，从短消息到大文件的任何内容都可以被散列，并将散列分发给多方。在任何时候，这些各方都可以通过散列数据块并检查它是否与他们之前收到的散列输出匹配来验证数据块。只有原始数据才能用于生成相同的哈希值。

000000000019d6689c085ae165831e934ff763ae46a2a6c172b3f1b60a8ce26f
具有如此多前导零的哈希值并不容易找到，并且会消耗 CPU 的能量。节点竞争在链中创建下一个时间戳或块的权利，这是通过解决这个哈希难题而授予的。



## CPU Power

最长的链不仅可以证明所见证的事件序列，还可以证明它来自最大的 CPU 算力池。

最长的工作量证明链是由最大的 CPU 算力池生成的区块链。

从规模上来说，这不仅仅意味着节点解决困难的工作量证明问题的能力，因为节点必须能够跟上网络的其他部分，完成下载、验证和存储所有交易的任务世界上实时发生的事情。

哈希机制用于解决最有能力的节点的工作投票问题，激励节点运营商构建最快、最有能力的机器以吸引最多的哈希。哈希算力可以立即关闭或打开，甚至可以在节点之间移动，因此确保它的使用有利可图是首要任务。通过这种方式，通过激励节点运营商投资最好、最有能力的机器来运行网络，网络保持健康。



## 网络共识

只要大部分 CPU 能力由非攻击网络的节点控制，它们就会生成最长的链并超过攻击者。

攻击账本完整性的方法之一是节点运营商在区块中包含一项双倍花费先前已花费的代币的交易，或者以其他方式在区块中包含根据网络规则无效的交易。诚实的节点将认识到这种违反规则的行为，并拒绝在该无效区块之后构建新区块。相反，他们将在其有效的前身之上构建新的区块，并创建一个诚实的竞争链。只要诚实节点控制一半以上的哈希算力，诚实链就会变得更长，并向所有网络参与者发出信号以忽略无效块。

由于攻击者的区块不再被网络的其余部分识别，因此创建无效区块的奖励也不会被识别。因此，这种尝试对攻击节点来说是一个巨大的成本，通过使其风险很大来阻止不诚实行为的尝试。

通过这种方式，节点使用算力来执行网络规则。发布违反规则的区块的节点会浪费用于生成有效工作证明的能源投资，并将丢失为其投票的哈希池。通过这种方式，工作量证明激励诚实行为，创建一个所有节点以合作方式竞争以执行既定网络规则的系统



## 网络结构

该网络通过激励结构自然形成，该激励结构驱动参与分类账的使用，以及围绕将交易从分类账处理到区块的企业活动。

没有中央治理，节点只需遵守既定规则即可参与。随着交易费用收入与网络使用量的增长相称，各个节点运营商将投资于基础设施，以提高其验证所有可用交易的能力并获得更大的费用收入池。这不是由网络或任何中央机构管理的，而是由通过与网络上其他节点更具竞争力来实现利润最大化的激励驱动的。



## 节点间的消息传递

消息以尽力而为的方式广播，节点可以随意离开和重新加入网络，接受最长的工作量证明链作为它们离开时发生的事情的证明。

在网络上广播的消息仅限于新交易和新区块发现公告。当节点收到新事务时，它会自动将其广播到与其具有对等连接的所有节点。通过确保所有其他节点都有该交易，该节点可以减少这些节点验证包含该交易的块所需的时间，从而为它们的块提供快速验证的最佳机会

节点将接受第一个看到的交易版本作为该交易的有效版本，并将尝试花费相同输入的任何后续交易视为双重支出。类似地，通过区块公告，节点将接受它们收到的第一个有效区块，该区块建立在最长的工作量证明链上，作为链中的下一个区块，并将开始在其上构建下一个区块。有时，区块会同时被发现，导致其中一个区块被排除在最长的工作证明链之外，从而导致它们成为“孤儿区块”。

节点可以随时离开和重新加入网络，并且不需要中央治理来实现这一点。当节点重新加入网络时，它们会连接到其他节点并请求自断开连接以来在网络上看到的所有事务和块的记录。然后，节点验证信息并从最近发现的区块重新加入竞争。

